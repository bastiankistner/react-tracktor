{"version":3,"sources":["/Users/mmk/Desktop/private/tracktor/src/PageView.tsx","/Users/mmk/Desktop/private/tracktor/docs/PageView.mdx","/Users/mmk/Desktop/private/tracktor/src/utils/defaultDispatcher.ts","/Users/mmk/Desktop/private/tracktor/src/TracktorContext.ts","/Users/mmk/Desktop/private/tracktor/src/TracktorProvider.tsx"],"names":["PageView","_ref","pageViewData","_React$useState","React","useState","initialState","_React$useState2","Object","slicedToArray","copiedContext","setCopiedContext","useEffect","dispatcher","isDefault","react_default","a","createElement","TracktorContext","Consumer","context","layoutProps","MDXLayout","MDXContent","components","props","objectWithoutProperties","index_es","assign","mdxType","id","parentName","align","index_esm","__position","__code","__scope","this","Playground","TracktorProvider","trackingData","console","log","src_PageView","view","isMDXComponent","defaultDispatcher","warn","__webpack_require__","d","__webpack_exports__","data","createContext","children","value","_Users_mmk_Desktop_private_tracktor_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1___default","_TracktorContext__WEBPACK_IMPORTED_MODULE_2__","Provider"],"mappings":"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","file":"static/js/docs-page-view.f2d52685.js","sourcesContent":["import React from 'react';\n\nimport { TracktorContext, initialState } from './TracktorContext';\n\n// Types\nimport { ContextType, PageViewProps } from './types';\n\nconst PageView = ({ pageViewData }: PageViewProps) => {\n  // We want to copy the context data, so we can use it from outside the `TracktorContext.Consumer` render prop.\n  const [copiedContext, setCopiedContext] = React.useState<ContextType>(initialState);\n\n  React.useEffect(() => {\n    if (!!pageViewData && !copiedContext.dispatcher.isDefault) {\n      // Get the `dispatcher` out of the context and call it with the provided `pageViewData`.\n      const { dispatcher } = copiedContext;\n\n      dispatcher(pageViewData);\n    }\n  }, [copiedContext.dispatcher.isDefault]);\n\n  return (\n    // We take the current context, copy it, and forward it to the next `<Tracktor />` with the data from this component merged.\n    // This enables us to gradually build the tracking object and have only the appropriate data at each level.\n    <TracktorContext.Consumer>\n      {context => {\n        setCopiedContext(context);\n\n        return null;\n      }}\n    </TracktorContext.Consumer>\n  );\n};\n\nexport default PageView;\n","/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\nimport { Playground } from 'docz'\nimport PageView from '../src/PageView'\nimport TracktorProvider from '../src/TracktorProvider'\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"pageview-\"\n    }}><inlineCode parentName=\"h1\">{`<PageView />`}</inlineCode></h1>\n    <p><inlineCode parentName=\"p\">{`<PageView />`}</inlineCode>{` is used to fire an tracking event when the page loads. It needs to be wrapped in `}<strong parentName=\"p\">{`one`}</strong>{` top-level `}<inlineCode parentName=\"p\">{`<TracktorProvider />`}</inlineCode>{` per render-tree which defines a `}<inlineCode parentName=\"p\">{`dispatcher`}</inlineCode>{` function that recieves the provided `}<inlineCode parentName=\"p\">{`pageViewData`}</inlineCode>{` and does something with it.\nSee the `}<inlineCode parentName=\"p\">{`<TracktorProvider />`}</inlineCode>{` section for details.`}</p>\n    <h2 {...{\n      \"id\": \"props\"\n    }}>{`Props`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Default`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`pageViewData`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><em parentName=\"td\">{`object`}</em></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><em parentName=\"td\">{`required`}</em></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`An object with data that the `}<inlineCode parentName=\"td\">{`dispatcher`}</inlineCode>{` should be called with on page load.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"usage\"\n    }}>{`Usage`}</h2>\n    <p><em parentName=\"p\">{`Open the console to see tracking events`}</em>{` & `}<em parentName=\"p\">{`Click the `}<inlineCode parentName=\"em\">{`<>`}</inlineCode>{` to see the code.`}</em></p>\n    <Playground __position={0} __code={'<TracktorProvider dispatcher={trackingData => console.log(trackingData)}>\\n  <PageView pageViewData={{ view: \\'PageView.mdx\\' }} />\\n  <main>\\n    <h2>PageView.mdx</h2>\\n    <section>\\n      <h3>Basic Usage</h3>\\n      <p>\\n        When this page loaded, we fired a tracking event with the data defined\\n        in `pageViewData`.\\n      </p>\\n    </section>\\n  </main>\\n</TracktorProvider>'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      PageView,\n      TracktorProvider\n    }} mdxType=\"Playground\">\n  <TracktorProvider dispatcher={trackingData => console.log(trackingData)} mdxType=\"TracktorProvider\">\n    <PageView pageViewData={{\n          view: 'PageView.mdx'\n        }} mdxType=\"PageView\" />\n     <main>\n          <h2>PageView.mdx</h2>\n      <section>\n            <h3>Basic Usage</h3>\n            <p>When this page loaded, we fired a tracking event with the data defined in `pageViewData`.</p>\n          </section>\n    </main>\n  </TracktorProvider>\n    </Playground>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  ","// Types\nimport { Dispatcher, TrackingData } from '../types';\n\nconst defaultDispatcher = function dispatcher(trackingData: TrackingData) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(JSON.stringify(trackingData, null, 2));\n  }\n\n  console.warn('No <TracktorProvider /> setup.');\n} as Dispatcher;\n\n// We'll mark this as the default dispatcher,\n// this is used to determine whether the consumer tries to implement multiple `<Provider/>`'s.\ndefaultDispatcher.isDefault = true;\n\nexport default defaultDispatcher;\n","import React from 'react';\n\nimport defaultDispatcher from './utils/defaultDispatcher';\n\n// Types\nimport { ContextType } from './types';\n\nexport const initialState = {\n  data: {},\n  dispatcher: defaultDispatcher,\n};\n\nexport const TracktorContext = React.createContext<ContextType>(initialState);\n","import React from 'react';\n\nimport { TracktorContext, initialState } from './TracktorContext';\n\n// Types\nimport { TracktorProviderProps } from './types';\n\nconst TracktorProvider = ({ children, dispatcher }: TracktorProviderProps) => {\n  const value = { ...initialState, dispatcher };\n\n  return (\n    <TracktorContext.Consumer>\n      {context => {\n        const { dispatcher: contextDispatcher } = context;\n\n        // If `contextDispatcher.isDefault` is falsey, we already have a custom contextDispatcher set.\n        // The consumer is only allowed to have one custom contextDispatcher per render tree.\n        if (!contextDispatcher.isDefault && process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            'Only one `<TracktorProvider />` is allowed in the render tree. This would lead to unexpected behaviour otherwise.',\n          );\n        }\n\n        return <TracktorContext.Provider value={value}>{children}</TracktorContext.Provider>;\n      }}\n    </TracktorContext.Consumer>\n  );\n};\n\nexport default TracktorProvider;\n"],"sourceRoot":""}